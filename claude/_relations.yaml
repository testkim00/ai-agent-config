# 커맨드-스킬 관계 정의
#
# 문서 수정 시 이 파일을 참조하여 관련 문서를 함께 확인/수정
#
# 사용법:
#   1. 커맨드 수정 시 → 연결된 skills 확인
#   2. 스킬 수정 시 → 연결된 commands 확인
#   3. 그룹 내 파일 수정 시 → 같은 그룹의 다른 파일 확인

relations:
  # Git 관련 (순수 git workflow)
  - commands: ["git/*"]
    skills: ["git-convention"]
    description: "커밋 메시지, 브랜치명 규칙"

  # Shared 모듈 관련 (공유 모듈 subtree 관리)
  - commands: ["shared/*"]
    skills: []
    description: "공유 모듈 push/pull/init (subtree)"

  # DB 관련
  - commands: ["db/*"]
    skills: ["db-query"]
    description: "쿼리 실행, 스키마, 템플릿"

  # 환경변수 관련 (DB 접속정보, API 토큰)
  - commands: ["env/*"]
    skills: []
    description: "환경변수 추가/조회/삭제"

  # 오케스트레이션
  - commands: ["orchestration.md"]
    skills: ["subagent-convention"]
    description: "5단계 흐름, 위임 체계, 템플릿"

  # 오케스트레이션 분석
  - commands: ["analyze/orchestration.md"]
    skills: ["subagent-convention"]
    description: "보고서 분석, 패턴 추출, 학습 규칙 업데이트"

  # 설정 동기화
  - commands: ["config/*"]
    skills: ["sync-config"]
    description: "설정 파일 동기화"

  # Dooray
  - commands: ["dooray/*"]
    skills: ["dooray"]
    description: "Dooray 메신저 연동"

  # Tidy (스킬 없음 - 커맨드 자체 참조)
  - commands: ["tidy/*"]
    skills: []
    description: "파일 정리 명령어 (md, meta)"
    shared: ["tidy/_common.md"]

  # Codex/Consult (독립 커맨드)
  - commands: ["codex.md", "consult.md"]
    skills: []
    description: "Codex 자문 명령어"

  # Project 관련 (프로젝트 생성만)
  - commands: ["project/*"]
    skills: []
    description: "프로젝트 생성"

  # 기타 독립 커맨드
  - commands: ["fix-encoding.md"]
    skills: []
    description: "터미널 한글 인코딩 설정"

# 그룹 내 공유 파일 (해당 그룹 수정 시 함께 확인)
shared_files:
  tidy:
    - "_common.md"

# 전역 참조 (모든 수정 시 고려)
global:
  - "CLAUDE.md"
  - "_relations.yaml"

# 스킬 내부 구조 (스킬 수정 시 함께 확인해야 할 파일들)
skill_internals:
  subagent-convention:
    - "_index.md"
    - "instruction.md"
    - "config.md"
    - "templates/*.md"

  db-query:
    - "skill.md"
    - "databases.md"
    - "templates.md"
    - "schema/*.md"

  git-convention:
    - "SKILL.md"

  dooray:
    - "skill.md"

  sync-config:
    - "skill.md"
